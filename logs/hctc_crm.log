2025-09-08 11:36:26,795 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:36:26,795 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:36:26,795 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:26,806 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:26,807 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:26,807 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:26,810 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:26,811 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:26,812 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00021s] ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:36:26.811904', 'text', None, None, 1, 'received', None, '2025-09-08 11:36:26.811907', '2025-09-08 11:36:26.811908') - Signature: 8598
2025-09-08 11:36:26,812 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:26,812 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:36:26.811904', 'text', None, None, 1, 'received', None, '2025-09-08 11:36:26.811907', '2025-09-08 11:36:26.811908')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,007 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,007 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,008 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,008 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,009 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,009 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,009 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1975s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:36:27.009237', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.009240', '2025-09-08 11:36:27.009241') - Signature: 8598
2025-09-08 11:36:27,009 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,009 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:36:27.009237', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.009240', '2025-09-08 11:36:27.009241')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,177 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,178 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.3669s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:36:27.178639', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.178642', '2025-09-08 11:36:27.178642') - Signature: 8598
2025-09-08 11:36:27,178 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,178 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:36:27.178639', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.178642', '2025-09-08 11:36:27.178642')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,375 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,375 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,376 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,376 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,377 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,377 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT 1 - Signature: 8598
2025-09-08 11:36:27,377 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00010s] () - Signature: 8598
2025-09-08 11:36:27,377 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,378 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,379 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,379 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,379 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,379 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,379 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: callcenter_verify_123, Challenge: test_challenge - Signature: 8598
2025-09-08 11:36:27,379 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification successful - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,381 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,381 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,381 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,381 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: invalid_token, Challenge: test_challenge - Signature: 8598
2025-09-08 11:36:27,381 - src.api.webhook_app.WebhookHandler - [33mWARNING[0m - Webhook verification failed - Invalid token - Signature: 8598
2025-09-08 11:36:27,381 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Webhook verification error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:36:27,381 - src.api.webhook_app - [31mERROR[0m - Webhook endpoint error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,385 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,385 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,386 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:36:27,386 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,386 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,386 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5751s ago] ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:27.386852', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.386854', '2025-09-08 11:36:27.386855') - Signature: 8598
2025-09-08 11:36:27,387 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,387 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:27.386852', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.386854', '2025-09-08 11:36:27.386855')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,387 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:27.386852', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.386854', '2025-09-08 11:36:27.386855')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,387 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:27.386852', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.386854', '2025-09-08 11:36:27.386855')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,387 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:27.386852', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.386854', '2025-09-08 11:36:27.386855')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,390 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,390 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,390 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,391 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,391 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,391 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: page - Signature: 8598
2025-09-08 11:36:27,392 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,392 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5807s ago] ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:27.392403', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:27.392406', '2025-09-08 11:36:27.392407') - Signature: 8598
2025-09-08 11:36:27,392 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,392 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:27.392403', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:27.392406', '2025-09-08 11:36:27.392407')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,392 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual Facebook message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:27.392403', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:27.392406', '2025-09-08 11:36:27.392407')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,392 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing Facebook message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:27.392403', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:27.392406', '2025-09-08 11:36:27.392407')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,392 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:27.392403', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:27.392406', '2025-09-08 11:36:27.392407')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,397 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,397 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,397 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,397 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5858s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:36:27.397580', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.397582', '2025-09-08 11:36:27.397583') - Signature: 8598
2025-09-08 11:36:27,397 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,397 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:36:27.397580', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.397582', '2025-09-08 11:36:27.397583')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,578 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,579 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,579 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,580 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,580 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,580 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.7688s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:36:27.580556', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.580559', '2025-09-08 11:36:27.580559') - Signature: 8598
2025-09-08 11:36:27,580 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,580 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:36:27.580556', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.580559', '2025-09-08 11:36:27.580559')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,757 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,757 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,757 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,758 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,758 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,759 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,759 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.9473s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:36:27.759107', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.759110', '2025-09-08 11:36:27.759111') - Signature: 8598
2025-09-08 11:36:27,759 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,759 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:36:27.759107', None, None, None, 1, 'received', None, '2025-09-08 11:36:27.759110', '2025-09-08 11:36:27.759111')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,925 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,926 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,926 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:36:27,926 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,927 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:27,927 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 1.115s ago] ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:27.927021', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.927023', '2025-09-08 11:36:27.927024') - Signature: 8598
2025-09-08 11:36:27,927 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:27,927 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:27.927021', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.927023', '2025-09-08 11:36:27.927024')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,927 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:27.927021', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.927023', '2025-09-08 11:36:27.927024')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,927 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:27.927021', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.927023', '2025-09-08 11:36:27.927024')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,927 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:27.927021', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:27.927023', '2025-09-08 11:36:27.927024')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:27,930 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:27,931 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:27,931 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:27,932 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: None - Signature: 8598
2025-09-08 11:36:27,932 - src.api.webhook_app - [33mWARNING[0m - Unknown webhook object type: None - Signature: 8598
2025-09-08 11:36:27,932 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: Unknown object type: None - Signature: 8598
2025-09-08 11:36:27,932 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:36:27,932 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:36:48,143 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,143 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:36:48,143 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:36:48,153 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,153 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,153 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,154 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,154 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,158 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,159 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,159 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00022s] ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:36:48.159469', 'text', None, None, 1, 'received', None, '2025-09-08 11:36:48.159472', '2025-09-08 11:36:48.159473') - Signature: 8598
2025-09-08 11:36:48,159 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,159 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:36:48.159469', 'text', None, None, 1, 'received', None, '2025-09-08 11:36:48.159472', '2025-09-08 11:36:48.159473')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,358 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,359 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,359 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,359 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,359 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,359 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2003s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:36:48.359654', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.359656', '2025-09-08 11:36:48.359657') - Signature: 8598
2025-09-08 11:36:48,359 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,360 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:36:48.359654', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.359656', '2025-09-08 11:36:48.359657')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,540 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,540 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,541 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,541 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,541 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.3822s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:36:48.541474', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.541479', '2025-09-08 11:36:48.541482') - Signature: 8598
2025-09-08 11:36:48,541 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,541 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:36:48.541474', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.541479', '2025-09-08 11:36:48.541482')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,710 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,710 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,710 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,711 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,711 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,712 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,712 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT 1 - Signature: 8598
2025-09-08 11:36:48,712 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00010s] () - Signature: 8598
2025-09-08 11:36:48,712 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,713 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,713 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,713 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,714 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,714 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,715 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: callcenter_verify_123, Challenge: test_challenge - Signature: 8598
2025-09-08 11:36:48,715 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification successful - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,715 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,715 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,716 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,716 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,716 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: invalid_token, Challenge: test_challenge - Signature: 8598
2025-09-08 11:36:48,716 - src.api.webhook_app.WebhookHandler - [33mWARNING[0m - Webhook verification failed - Invalid token - Signature: 8598
2025-09-08 11:36:48,717 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Webhook verification error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:36:48,717 - src.api.webhook_app - [31mERROR[0m - Webhook endpoint error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:36:48,720 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,720 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,720 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,721 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,721 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,721 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,721 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,721 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:36:48,722 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,722 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,722 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5631s ago] ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:48.722399', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:48.722402', '2025-09-08 11:36:48.722403') - Signature: 8598
2025-09-08 11:36:48,722 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,722 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:48.722399', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:48.722402', '2025-09-08 11:36:48.722403')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,722 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:48.722399', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:48.722402', '2025-09-08 11:36:48.722403')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,722 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:48.722399', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:48.722402', '2025-09-08 11:36:48.722403')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,722 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:36:48.722399', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:48.722402', '2025-09-08 11:36:48.722403')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,726 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,727 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,727 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,727 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,727 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: page - Signature: 8598
2025-09-08 11:36:48,727 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,728 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5687s ago] ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:48.728027', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:48.728030', '2025-09-08 11:36:48.728031') - Signature: 8598
2025-09-08 11:36:48,728 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,728 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:48.728027', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:48.728030', '2025-09-08 11:36:48.728031')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,728 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual Facebook message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:48.728027', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:48.728030', '2025-09-08 11:36:48.728031')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,728 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing Facebook message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:48.728027', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:48.728030', '2025-09-08 11:36:48.728031')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,728 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:36:48.728027', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:36:48.728030', '2025-09-08 11:36:48.728031')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,731 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,731 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,732 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,732 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,733 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,733 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.5739s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:36:48.733168', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.733171', '2025-09-08 11:36:48.733172') - Signature: 8598
2025-09-08 11:36:48,733 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,733 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:36:48.733168', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.733171', '2025-09-08 11:36:48.733172')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:48,901 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:48,901 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:48,902 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:48,902 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:48,902 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.743s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:36:48.902357', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.902360', '2025-09-08 11:36:48.902360') - Signature: 8598
2025-09-08 11:36:48,902 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:48,902 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:36:48.902357', None, None, None, 1, 'received', None, '2025-09-08 11:36:48.902360', '2025-09-08 11:36:48.902360')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,095 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,096 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:49,096 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:49,097 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:49,097 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:49,097 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.9379s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:36:49.097268', None, None, None, 1, 'received', None, '2025-09-08 11:36:49.097271', '2025-09-08 11:36:49.097272') - Signature: 8598
2025-09-08 11:36:49,097 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:49,097 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:36:49.097268', None, None, None, 1, 'received', None, '2025-09-08 11:36:49.097271', '2025-09-08 11:36:49.097272')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,270 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:49,270 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:49,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,270 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:49,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,271 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:49,271 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,271 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:49,271 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,271 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:49,271 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:49,271 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:36:49,272 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:49,272 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:36:49,272 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 1.113s ago] ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:49.272234', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:49.272237', '2025-09-08 11:36:49.272238') - Signature: 8598
2025-09-08 11:36:49,272 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:36:49,272 - src.services.message_service.MessageService - [31mERROR[0m - Failed to log message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:49.272234', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:49.272237', '2025-09-08 11:36:49.272238')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,272 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing individual WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:49.272234', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:49.272237', '2025-09-08 11:36:49.272238')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,272 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Error processing WhatsApp message: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:49.272234', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:49.272237', '2025-09-08 11:36:49.272238')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,272 - src.api.webhook_app - [31mERROR[0m - Webhook processing error: (sqlite3.OperationalError) table messages has no column named created_at
[SQL: INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:36:49.272234', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:36:49.272237', '2025-09-08 11:36:49.272238')]
(Background on this error at: https://sqlalche.me/e/20/e3q8) - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:36:49,276 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:36:49,276 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:36:49,277 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: None - Signature: 8598
2025-09-08 11:36:49,277 - src.api.webhook_app - [33mWARNING[0m - Unknown webhook object type: None - Signature: 8598
2025-09-08 11:36:49,277 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: Unknown object type: None - Signature: 8598
2025-09-08 11:36:49,277 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:36:49,278 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:38:06,225 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,225 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:38:06,225 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:38:06,235 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,235 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,235 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,236 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,239 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,239 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00012s] () - Signature: 8598
2025-09-08 11:38:06,239 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,240 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,240 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,241 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,242 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,243 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,244 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,245 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,246 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,247 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,248 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,249 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,249 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,249 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,249 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,252 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,253 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,254 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00022s] ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:38:06.253852', 'text', None, None, 1, 'received', None, '2025-09-08 11:38:06.253856', '2025-09-08 11:38:06.253857') - Signature: 8598
2025-09-08 11:38:06,254 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,255 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,256 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,256 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00015s] (1,) - Signature: 8598
2025-09-08 11:38:06,258 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,258 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00017s] ('+1234567890', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,259 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,259 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00019s] ('+1234567890', 'WhatsApp', 'TestAgent', '2025-09-08 11:38:06.253852', 1, 1, '2025-09-08 11:38:06.259171', '2025-09-08 11:38:06.259174') - Signature: 8598
2025-09-08 11:38:06,259 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,259 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,260 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,260 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] (1,) - Signature: 8598
2025-09-08 11:38:06,260 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: TestAgent, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,260 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,261 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,262 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,263 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,263 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,264 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,265 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,266 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,267 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,268 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,269 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,270 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,271 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,271 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01818s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:38:06.271891', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.271894', '2025-09-08 11:38:06.271894') - Signature: 8598
2025-09-08 11:38:06,272 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,272 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,272 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,272 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0165s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,273 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,273 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0151s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,273 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,273 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0145s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.271891', 1, 1, '2025-09-08 11:38:06.273535', '2025-09-08 11:38:06.273537') - Signature: 8598
2025-09-08 11:38:06,273 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01386s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,274 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,274 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.02119s ago] ('Agent2', 'Facebook', '+2222222222', 'Message 2', '2025-09-08 11:38:06.274900', None, None, None, 0, 'received', None, '2025-09-08 11:38:06.274902', '2025-09-08 11:38:06.274902') - Signature: 8598
2025-09-08 11:38:06,275 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,275 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,275 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,275 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0194s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01799s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01735s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:38:06.274900', 1, 1, '2025-09-08 11:38:06.276395', '2025-09-08 11:38:06.276397') - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,276 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,277 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,277 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01667s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,277 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:38:06,277 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,277 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,278 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,278 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] (10, 0) - Signature: 8598
2025-09-08 11:38:06,278 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,278 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,279 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.platform = ? ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,279 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('WhatsApp', 100, 0) - Signature: 8598
2025-09-08 11:38:06,279 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,279 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,280 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,280 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('Agent1', 100, 0) - Signature: 8598
2025-09-08 11:38:06,280 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,281 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,282 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,283 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,283 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,284 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,285 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,286 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,287 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,288 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,289 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,290 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,291 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,291 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,291 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,291 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03783s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:38:06.291545', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.291547', '2025-09-08 11:38:06.291547') - Signature: 8598
2025-09-08 11:38:06,291 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,292 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,292 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,292 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03613s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,292 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,292 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03473s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03414s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.291545', 1, 1, '2025-09-08 11:38:06.293168', '2025-09-08 11:38:06.293171') - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,293 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0335s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,294 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,294 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,294 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,294 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,294 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.04076s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test reply 1', '2025-09-08 11:38:06.294483', None, None, None, 0, 'received', None, '2025-09-08 11:38:06.294484', '2025-09-08 11:38:06.294485') - Signature: 8598
2025-09-08 11:38:06,294 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,295 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,295 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,295 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03899s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,295 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,295 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03751s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,296 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:38:06,296 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] ('2025-09-08 11:38:06.294483', 2, '2025-09-08 11:38:06.295811', 1) - Signature: 8598
2025-09-08 11:38:06,296 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,296 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,297 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,297 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03674s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,297 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,297 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,297 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,299 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,299 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00015s] () - Signature: 8598
2025-09-08 11:38:06,300 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages GROUP BY messages.platform - Signature: 8598
2025-09-08 11:38:06,300 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] () - Signature: 8598
2025-09-08 11:38:06,300 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.agent AS messages_agent, count(messages.id) AS count_1 
FROM messages GROUP BY messages.agent - Signature: 8598
2025-09-08 11:38:06,301 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] () - Signature: 8598
2025-09-08 11:38:06,301 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.is_incoming AS messages_is_incoming, count(messages.id) AS count_1 
FROM messages GROUP BY messages.is_incoming - Signature: 8598
2025-09-08 11:38:06,301 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] () - Signature: 8598
2025-09-08 11:38:06,302 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT CAST(STRFTIME('%H', messages.timestamp) AS INTEGER) AS hour, count(messages.id) AS count_1 
FROM messages GROUP BY hour ORDER BY hour - Signature: 8598
2025-09-08 11:38:06,302 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] () - Signature: 8598
2025-09-08 11:38:06,303 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.recipient AS messages_recipient, count(messages.id) AS count 
FROM messages GROUP BY messages.recipient ORDER BY count DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,303 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] (10, 0) - Signature: 8598
2025-09-08 11:38:06,303 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,305 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,306 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,307 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,307 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,308 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,309 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,310 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,311 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,312 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,313 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,314 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,314 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,315 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,315 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT 1 - Signature: 8598
2025-09-08 11:38:06,315 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] () - Signature: 8598
2025-09-08 11:38:06,315 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,316 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,316 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,316 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,316 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,317 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,318 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,318 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,319 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,320 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,321 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,322 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,323 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,324 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,325 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,326 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,326 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,326 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,326 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,326 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: callcenter_verify_123, Challenge: test_challenge - Signature: 8598
2025-09-08 11:38:06,326 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification successful - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,327 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,327 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,327 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,327 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,327 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,328 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,329 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,329 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,330 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,331 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,332 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,333 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,334 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,335 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,336 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,336 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,337 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: invalid_token, Challenge: test_challenge - Signature: 8598
2025-09-08 11:38:06,337 - src.api.webhook_app.WebhookHandler - [33mWARNING[0m - Webhook verification failed - Invalid token - Signature: 8598
2025-09-08 11:38:06,337 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Webhook verification error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:38:06,337 - src.api.webhook_app - [31mERROR[0m - Webhook endpoint error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,352 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,353 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,354 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,354 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,355 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,365 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,365 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00014s] () - Signature: 8598
2025-09-08 11:38:06,365 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,366 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,367 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,368 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,369 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,370 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,371 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,371 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,371 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,371 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,371 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,371 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,372 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:38:06,372 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,372 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,372 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1188s ago] ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:38:06.372521', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:38:06.372523', '2025-09-08 11:38:06.372523') - Signature: 8598
2025-09-08 11:38:06,372 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,373 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,373 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,373 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1171s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,373 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,373 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1157s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1151s ago] ('+1987654321', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.372521', 1, 1, '2025-09-08 11:38:06.374149', '2025-09-08 11:38:06.374151') - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,374 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1144s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,375 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,375 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,375 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - WhatsApp message processed - From: +1987654321, Type: text - Signature: 8598
2025-09-08 11:38:06,375 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,376 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,377 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,377 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,378 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,379 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,380 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,381 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,382 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,383 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,384 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,384 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,385 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: page - Signature: 8598
2025-09-08 11:38:06,385 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,385 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,385 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.132s ago] ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:38:06.385752', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:38:06.385755', '2025-09-08 11:38:06.385755') - Signature: 8598
2025-09-08 11:38:06,386 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,386 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,386 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,386 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1303s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,386 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1289s ago] ('123456789', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1283s ago] ('123456789', 'Facebook', 'Agent1', '2025-09-08 11:38:06.385752', 1, 1, '2025-09-08 11:38:06.387325', '2025-09-08 11:38:06.387327') - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,387 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,388 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1276s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,388 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: Facebook - Signature: 8598
2025-09-08 11:38:06,388 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,388 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Facebook message processed - From: 123456789, Type: text - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,389 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,390 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,390 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,391 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,392 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,393 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,394 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,394 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,394 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00012s] () - Signature: 8598
2025-09-08 11:38:06,394 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,394 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,395 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,396 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,397 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,398 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,398 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1454s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:38:06.399074', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.399076', '2025-09-08 11:38:06.399077') - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,399 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1436s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,400 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,400 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1422s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,400 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,400 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1416s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.399074', 1, 1, '2025-09-08 11:38:06.400610', '2025-09-08 11:38:06.400612') - Signature: 8598
2025-09-08 11:38:06,400 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1409s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,401 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,401 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1482s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Reply message 1', '2025-09-08 11:38:06.401879', None, None, None, 0, 'received', None, '2025-09-08 11:38:06.401881', '2025-09-08 11:38:06.401882') - Signature: 8598
2025-09-08 11:38:06,402 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,402 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,402 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,402 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1463s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,402 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1449s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.107s ago] ('2025-09-08 11:38:06.401879', 2, '2025-09-08 11:38:06.403155', 1) - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,403 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1435s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,404 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1507s ago] ('Agent2', 'Facebook', '+2222222222', 'Incoming message 2', '2025-09-08 11:38:06.404429', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.404431', '2025-09-08 11:38:06.404432') - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,404 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1489s ago] (3,) - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1474s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,405 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1467s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:38:06.404429', 1, 1, '2025-09-08 11:38:06.405785', '2025-09-08 11:38:06.405787') - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.146s ago] (3,) - Signature: 8598
2025-09-08 11:38:06,406 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 3, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,406 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,408 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,408 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,409 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,409 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00014s] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,413 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,413 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00016s] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,414 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:38:06,414 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,415 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,415 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,415 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,415 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,415 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,416 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.008046s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:38:06,416 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,416 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.007054s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:38:06,416 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,416 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.003301s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:38:06,417 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:38:06,417 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.002844s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:38:06,417 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,417 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.00227s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:38:06,417 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,418 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,419 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,419 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,420 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,421 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,422 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,423 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,424 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,425 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,426 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,427 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,427 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,428 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,428 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,428 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1747s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:38:06.428394', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.428396', '2025-09-08 11:38:06.428396') - Signature: 8598
2025-09-08 11:38:06,428 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,428 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,429 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,429 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1729s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,429 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,429 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1715s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,429 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1709s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.428394', 1, 1, '2025-09-08 11:38:06.429942', '2025-09-08 11:38:06.429944') - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1702s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,430 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,430 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1775s ago] ('Agent1', 'WhatsApp', '+1111111111', 'I need help with my order', '2025-09-08 11:38:06.431208', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.431210', '2025-09-08 11:38:06.431210') - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,431 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1756s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,432 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,432 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1742s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,432 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:38:06,432 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1363s ago] ('2025-09-08 11:38:06.431208', 2, '2025-09-08 11:38:06.432452', 1) - Signature: 8598
2025-09-08 11:38:06,432 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1728s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,433 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,433 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1801s ago] ('Agent1', 'WhatsApp', '+1111111111', "Sure, what's your order number?", '2025-09-08 11:38:06.433767', None, None, None, 0, 'received', None, '2025-09-08 11:38:06.433769', '2025-09-08 11:38:06.433769') - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1782s ago] (3,) - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,434 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1767s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1389s ago] ('2025-09-08 11:38:06.433767', 3, '2025-09-08 11:38:06.435033', 1) - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1753s ago] (3,) - Signature: 8598
2025-09-08 11:38:06,435 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 3, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,435 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,436 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,436 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.is_active = 1 ORDER BY conversations.last_message_at DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,436 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] (50, 0) - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,437 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,438 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,439 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,439 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,440 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,441 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,442 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,443 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,444 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,445 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,446 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,446 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1934s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:38:06.447118', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.447120', '2025-09-08 11:38:06.447121') - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,447 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1916s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,448 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,448 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1902s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,448 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,448 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1896s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.447118', 1, 1, '2025-09-08 11:38:06.448632', '2025-09-08 11:38:06.448634') - Signature: 8598
2025-09-08 11:38:06,448 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1889s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,449 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,449 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1962s ago] ('Agent2', 'Facebook', '+2222222222', 'Refund request', '2025-09-08 11:38:06.449905', None, None, None, 1, 'received', None, '2025-09-08 11:38:06.449907', '2025-09-08 11:38:06.449907') - Signature: 8598
2025-09-08 11:38:06,450 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,450 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,450 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,450 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1944s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,450 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1929s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1922s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:38:06.449905', 1, 1, '2025-09-08 11:38:06.451286', '2025-09-08 11:38:06.451287') - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,451 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1915s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,452 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:38:06,452 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,452 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE lower(messages.content) LIKE lower(?) OR lower(messages.recipient) LIKE lower(?) OR lower(messages.agent) LIKE lower(?) ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('%order%', '%order%', '%order%', 100, 0) - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE lower(messages.content) LIKE lower(?) OR lower(messages.recipient) LIKE lower(?) OR lower(messages.agent) LIKE lower(?) ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,453 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0009443s ago] ('%refund%', '%refund%', '%refund%', 100, 0) - Signature: 8598
2025-09-08 11:38:06,454 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,454 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,454 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,454 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,454 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,455 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,456 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,456 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,457 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,458 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,459 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,460 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,461 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,461 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,461 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,461 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,461 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,465 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,465 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00014s] () - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,466 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,467 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,468 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,468 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,468 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,468 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,468 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,468 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2156s ago] ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:38:06.469280', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:38:06.469282', '2025-09-08 11:38:06.469283') - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,469 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,470 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2138s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,470 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,470 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2124s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,470 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,470 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2118s ago] ('+1987654321', 'WhatsApp', 'Agent1', '2025-09-08 11:38:06.469280', 1, 1, '2025-09-08 11:38:06.470856', '2025-09-08 11:38:06.470858') - Signature: 8598
2025-09-08 11:38:06,471 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,471 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,471 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,471 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2111s ago] (1,) - Signature: 8598
2025-09-08 11:38:06,471 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,471 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,471 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - WhatsApp message processed - From: +1987654321, Type: text - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2186s ago] ('Agent1', 'WhatsApp', '+1987654321', "Hi! I can help you with order #12345. What's the issue?", '2025-09-08 11:38:06.472316', None, None, None, 0, 'sent', None, '2025-09-08 11:38:06.472319', '2025-09-08 11:38:06.472320') - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,472 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2168s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2153s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1774s ago] ('2025-09-08 11:38:06.472316', 2, '2025-09-08 11:38:06.473616', 1) - Signature: 8598
2025-09-08 11:38:06,473 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2139s ago] (2,) - Signature: 8598
2025-09-08 11:38:06,474 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.is_active = 1 ORDER BY conversations.last_message_at DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:38:06,474 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03836s ago] (50, 0) - Signature: 8598
2025-09-08 11:38:06,475 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,475 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,475 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,475 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06771s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06677s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06311s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:38:06,476 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06275s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,477 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:38:06,477 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0622s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:38:06,477 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:38:06,478 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,479 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,479 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,480 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:38:06,481 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:38:06,482 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:38:06,483 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,484 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:38:06,485 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:38:06,486 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,487 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:38:06,487 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:38:06,487 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:38:06,487 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:38:06,487 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: None - Signature: 8598
2025-09-08 11:38:06,487 - src.api.webhook_app - [33mWARNING[0m - Unknown webhook object type: None - Signature: 8598
2025-09-08 11:38:06,487 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: Unknown object type: None - Signature: 8598
2025-09-08 11:38:06,488 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:38:06,488 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:39:13,589 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,589 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:39:13,589 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:39:13,599 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,600 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,601 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,603 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,603 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00012s] () - Signature: 8598
2025-09-08 11:39:13,604 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,604 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,604 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,604 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,604 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,605 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,605 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,606 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,607 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,608 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,609 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,610 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,611 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,612 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,613 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,614 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,614 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,614 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,617 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,618 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,618 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00021s] ('TestAgent', 'WhatsApp', '+1234567890', 'Test message', '2025-09-08 11:39:13.618755', 'text', None, None, 1, 'received', None, '2025-09-08 11:39:13.618759', '2025-09-08 11:39:13.618760') - Signature: 8598
2025-09-08 11:39:13,619 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,619 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,621 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,621 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00015s] (1,) - Signature: 8598
2025-09-08 11:39:13,622 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,623 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00017s] ('+1234567890', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,623 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,624 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00018s] ('+1234567890', 'WhatsApp', 'TestAgent', '2025-09-08 11:39:13.618755', 1, 1, '2025-09-08 11:39:13.623875', '2025-09-08 11:39:13.623878') - Signature: 8598
2025-09-08 11:39:13,624 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,624 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,625 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,625 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] (1,) - Signature: 8598
2025-09-08 11:39:13,625 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: TestAgent, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,625 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,626 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,627 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,628 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,628 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,629 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,630 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,631 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,632 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,633 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,634 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,635 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,636 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,636 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0183s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Message 1', '2025-09-08 11:39:13.636910', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.636912', '2025-09-08 11:39:13.636913') - Signature: 8598
2025-09-08 11:39:13,637 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,637 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,637 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,637 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01673s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,638 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,638 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01538s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,638 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,638 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01487s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.636910', 1, 1, '2025-09-08 11:39:13.638606', '2025-09-08 11:39:13.638608') - Signature: 8598
2025-09-08 11:39:13,638 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01423s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,639 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,639 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,640 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.02131s ago] ('Agent2', 'Facebook', '+2222222222', 'Message 2', '2025-09-08 11:39:13.639930', None, None, None, 0, 'received', None, '2025-09-08 11:39:13.639932', '2025-09-08 11:39:13.639933') - Signature: 8598
2025-09-08 11:39:13,640 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,640 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,640 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,640 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01966s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01823s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01764s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:39:13.639930', 1, 1, '2025-09-08 11:39:13.641391', '2025-09-08 11:39:13.641393') - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,641 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,642 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,642 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.01698s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,642 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:39:13,642 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,642 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,643 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,643 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] (10, 0) - Signature: 8598
2025-09-08 11:39:13,643 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,643 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,644 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.platform = ? ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,644 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('WhatsApp', 100, 0) - Signature: 8598
2025-09-08 11:39:13,644 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,644 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,645 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,645 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('Agent1', 100, 0) - Signature: 8598
2025-09-08 11:39:13,645 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,646 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,647 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,648 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,648 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,649 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,650 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,651 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,652 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,653 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,654 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,655 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,656 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,656 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,656 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,656 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.038s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test message 1', '2025-09-08 11:39:13.656609', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.656612', '2025-09-08 11:39:13.656613') - Signature: 8598
2025-09-08 11:39:13,656 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,657 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,657 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,657 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03638s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,657 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,657 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.035s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03447s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.656609', 1, 1, '2025-09-08 11:39:13.658199', '2025-09-08 11:39:13.658201') - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,658 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03384s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,659 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,659 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,659 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,659 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,659 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0409s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Test reply 1', '2025-09-08 11:39:13.659522', None, None, None, 0, 'received', None, '2025-09-08 11:39:13.659524', '2025-09-08 11:39:13.659525') - Signature: 8598
2025-09-08 11:39:13,659 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,660 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,660 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,660 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03925s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,660 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,660 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03781s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,661 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:39:13,661 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00014s] ('2025-09-08 11:39:13.659522', 2, '2025-09-08 11:39:13.660859', 1) - Signature: 8598
2025-09-08 11:39:13,661 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,662 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,662 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,662 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03711s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,662 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,662 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,663 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,664 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,664 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00014s] () - Signature: 8598
2025-09-08 11:39:13,665 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages GROUP BY messages.platform - Signature: 8598
2025-09-08 11:39:13,665 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] () - Signature: 8598
2025-09-08 11:39:13,665 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.agent AS messages_agent, count(messages.id) AS count_1 
FROM messages GROUP BY messages.agent - Signature: 8598
2025-09-08 11:39:13,666 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] () - Signature: 8598
2025-09-08 11:39:13,666 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.is_incoming AS messages_is_incoming, count(messages.id) AS count_1 
FROM messages GROUP BY messages.is_incoming - Signature: 8598
2025-09-08 11:39:13,666 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00014s] () - Signature: 8598
2025-09-08 11:39:13,667 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT CAST(STRFTIME('%H', messages.timestamp) AS INTEGER) AS hour, count(messages.id) AS count_1 
FROM messages GROUP BY hour ORDER BY hour - Signature: 8598
2025-09-08 11:39:13,667 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] () - Signature: 8598
2025-09-08 11:39:13,668 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.recipient AS messages_recipient, count(messages.id) AS count 
FROM messages GROUP BY messages.recipient ORDER BY count DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,668 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] (10, 0) - Signature: 8598
2025-09-08 11:39:13,668 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,670 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,671 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,672 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,672 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,673 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,674 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,675 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,676 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,677 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,678 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,679 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,680 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,680 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,680 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,680 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,680 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,681 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT 1 - Signature: 8598
2025-09-08 11:39:13,681 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00009s] () - Signature: 8598
2025-09-08 11:39:13,681 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,682 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,683 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,684 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,684 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,685 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,686 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,687 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,688 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,689 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,690 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,691 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,692 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,692 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,692 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: callcenter_verify_123, Challenge: test_challenge - Signature: 8598
2025-09-08 11:39:13,692 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification successful - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,693 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,694 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,695 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,695 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,696 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,697 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,698 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,699 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,700 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,701 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,702 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,703 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,703 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,703 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Webhook verification attempt - Token: invalid_token, Challenge: test_challenge - Signature: 8598
2025-09-08 11:39:13,703 - src.api.webhook_app.WebhookHandler - [33mWARNING[0m - Webhook verification failed - Invalid token - Signature: 8598
2025-09-08 11:39:13,703 - src.api.webhook_app.WebhookHandler - [31mERROR[0m - Webhook verification error: 401 Unauthorized: Verification failed - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,704 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,705 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,705 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,705 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,705 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,713 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,713 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00013s] () - Signature: 8598
2025-09-08 11:39:13,713 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,713 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,714 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,714 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,715 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,716 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,717 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,718 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,719 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,720 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,721 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,721 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,722 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:39:13,722 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,722 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,722 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1041s ago] ('Agent1', 'WhatsApp', '+1987654321', 'Test WhatsApp message', '2025-09-08 11:39:13.722754', 'text', 'test_message_id', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:39:13.722756', '2025-09-08 11:39:13.722757') - Signature: 8598
2025-09-08 11:39:13,723 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,723 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,724 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,724 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1031s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,725 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,725 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1023s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,725 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,725 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1018s ago] ('+1987654321', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.722754', 1, 1, '2025-09-08 11:39:13.725574', '2025-09-08 11:39:13.725576') - Signature: 8598
2025-09-08 11:39:13,725 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,726 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,726 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,726 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1012s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,726 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,726 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,726 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - WhatsApp message processed - From: +1987654321, Type: text - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,727 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,728 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,729 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,729 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,730 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,731 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,732 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,733 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,734 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,735 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,736 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,736 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,737 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: page - Signature: 8598
2025-09-08 11:39:13,737 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,737 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,737 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1189s ago] ('Agent1', 'Facebook', '123456789', 'Test Facebook message', '2025-09-08 11:39:13.737526', 'text', 'test_message_id', '123456789', 1, 'received', '{"recipient_id": "987654321", "message_type": "text"}', '2025-09-08 11:39:13.737528', '2025-09-08 11:39:13.737529') - Signature: 8598
2025-09-08 11:39:13,737 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,738 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,738 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,738 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1173s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,738 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,738 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1159s ago] ('123456789', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1154s ago] ('123456789', 'Facebook', 'Agent1', '2025-09-08 11:39:13.737526', 1, 1, '2025-09-08 11:39:13.739120', '2025-09-08 11:39:13.739122') - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,739 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1147s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,740 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: Facebook - Signature: 8598
2025-09-08 11:39:13,740 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,740 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - Facebook message processed - From: 123456789, Type: text - Signature: 8598
2025-09-08 11:39:13,740 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,740 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,740 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,741 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,742 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,742 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,743 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,744 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,745 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,746 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,747 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,748 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,749 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,750 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,750 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,750 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,750 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,750 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1321s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Incoming message 1', '2025-09-08 11:39:13.750753', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.750755', '2025-09-08 11:39:13.750756') - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1305s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,751 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1291s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1286s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.750753', 1, 1, '2025-09-08 11:39:13.752292', '2025-09-08 11:39:13.752294') - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,752 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1279s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,753 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1349s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Reply message 1', '2025-09-08 11:39:13.753516', None, None, None, 0, 'received', None, '2025-09-08 11:39:13.753518', '2025-09-08 11:39:13.753519') - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,753 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,754 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,754 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1331s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,754 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,754 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1318s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,754 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.09362s ago] ('2025-09-08 11:39:13.753516', 2, '2025-09-08 11:39:13.754828', 1) - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1305s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,755 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,755 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1375s ago] ('Agent2', 'Facebook', '+2222222222', 'Incoming message 2', '2025-09-08 11:39:13.756104', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.756106', '2025-09-08 11:39:13.756107') - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,756 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1357s ago] (3,) - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1343s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1337s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:39:13.756104', 1, 1, '2025-09-08 11:39:13.757444', '2025-09-08 11:39:13.757445') - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,757 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,758 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,758 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.133s ago] (3,) - Signature: 8598
2025-09-08 11:39:13,758 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 3, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:39:13,758 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,758 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,759 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,759 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,761 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,761 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00016s] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,765 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,765 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00016s] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,766 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:39:13,766 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00011s] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00013s] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,767 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.008163s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:39:13,768 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,768 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.007126s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:39:13,768 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,768 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.003437s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:39:13,768 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:39:13,769 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.002973s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:39:13,769 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,769 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.00238s ago] ('Agent2',) - Signature: 8598
2025-09-08 11:39:13,769 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,770 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,771 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,772 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,772 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,773 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,774 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,775 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,776 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,777 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,778 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,779 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,779 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1612s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Hello, how can I help?', '2025-09-08 11:39:13.779860', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.779863', '2025-09-08 11:39:13.779863') - Signature: 8598
2025-09-08 11:39:13,780 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,780 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,780 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,780 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1597s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,781 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,781 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1583s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,781 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,781 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1578s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.779860', 1, 1, '2025-09-08 11:39:13.781525', '2025-09-08 11:39:13.781527') - Signature: 8598
2025-09-08 11:39:13,781 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1571s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,782 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,782 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1641s ago] ('Agent1', 'WhatsApp', '+1111111111', 'I need help with my order', '2025-09-08 11:39:13.782769', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.782771', '2025-09-08 11:39:13.782772') - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1624s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,783 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.161s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1228s ago] ('2025-09-08 11:39:13.782769', 2, '2025-09-08 11:39:13.784011', 1) - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,784 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1597s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,784 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1667s ago] ('Agent1', 'WhatsApp', '+1111111111', "Sure, what's your order number?", '2025-09-08 11:39:13.785358', None, None, None, 0, 'received', None, '2025-09-08 11:39:13.785360', '2025-09-08 11:39:13.785360') - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,785 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.165s ago] (3,) - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1635s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1254s ago] ('2025-09-08 11:39:13.785358', 3, '2025-09-08 11:39:13.786603', 1) - Signature: 8598
2025-09-08 11:39:13,786 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,787 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,787 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,787 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1622s ago] (3,) - Signature: 8598
2025-09-08 11:39:13,787 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 3, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,787 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,787 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,788 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.is_active = 1 ORDER BY conversations.last_message_at DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,788 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] (50, 0) - Signature: 8598
2025-09-08 11:39:13,788 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,789 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,790 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,791 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,791 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,792 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,793 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,794 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,795 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,796 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,797 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,798 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,798 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1805s ago] ('Agent1', 'WhatsApp', '+1111111111', 'Order number 12345', '2025-09-08 11:39:13.799116', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.799118', '2025-09-08 11:39:13.799118') - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,799 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1789s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,800 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,800 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1775s ago] ('+1111111111', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,800 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,800 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1769s ago] ('+1111111111', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.799116', 1, 1, '2025-09-08 11:39:13.800657', '2025-09-08 11:39:13.800659') - Signature: 8598
2025-09-08 11:39:13,800 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1762s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,801 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,801 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1833s ago] ('Agent2', 'Facebook', '+2222222222', 'Refund request', '2025-09-08 11:39:13.801924', None, None, None, 1, 'received', None, '2025-09-08 11:39:13.801926', '2025-09-08 11:39:13.801926') - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1816s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,802 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1802s ago] ('+2222222222', 'Facebook', 1, 0) - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1796s ago] ('+2222222222', 'Facebook', 'Agent2', '2025-09-08 11:39:13.801924', 1, 1, '2025-09-08 11:39:13.803314', '2025-09-08 11:39:13.803316') - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,803 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1788s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,804 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent2, Platform: Facebook - Signature: 8598
2025-09-08 11:39:13,804 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,804 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE lower(messages.content) LIKE lower(?) OR lower(messages.recipient) LIKE lower(?) OR lower(messages.agent) LIKE lower(?) ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - [generated in 0.00012s] ('%order%', '%order%', '%order%', 100, 0) - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE lower(messages.content) LIKE lower(?) OR lower(messages.recipient) LIKE lower(?) OR lower(messages.agent) LIKE lower(?) ORDER BY messages.timestamp DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,805 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.0009173s ago] ('%refund%', '%refund%', '%refund%', 100, 0) - Signature: 8598
2025-09-08 11:39:13,806 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,806 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,806 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,806 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,807 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,808 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,808 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,809 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,810 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,811 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,812 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,816 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,816 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00012s] () - Signature: 8598
2025-09-08 11:39:13,816 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,816 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,816 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,817 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,818 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,819 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,820 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,820 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,821 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: whatsapp_business_account - Signature: 8598
2025-09-08 11:39:13,821 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,821 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,821 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.203s ago] ('Agent1', 'WhatsApp', '+1987654321', 'I need help with my order #12345', '2025-09-08 11:39:13.821576', 'text', 'workflow_test_msg', '+1987654321', 1, 'received', '{"phone_number_id": "987654321", "display_phone_number": "+1234567890", "message_type": "text"}', '2025-09-08 11:39:13.821579', '2025-09-08 11:39:13.821579') - Signature: 8598
2025-09-08 11:39:13,821 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,822 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,822 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,822 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2013s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,822 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,822 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO conversations (recipient, platform, agent, last_message_at, message_count, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1994s ago] ('+1987654321', 'WhatsApp', 'Agent1', '2025-09-08 11:39:13.821576', 1, 1, '2025-09-08 11:39:13.823168', '2025-09-08 11:39:13.823170') - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,823 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1988s ago] (1,) - Signature: 8598
2025-09-08 11:39:13,824 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 1, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,824 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,824 - src.api.webhook_app.WebhookHandler - [32mINFO[0m - WhatsApp message processed - From: +1987654321, Type: text - Signature: 8598
2025-09-08 11:39:13,824 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,824 - sqlalchemy.engine.Engine - [32mINFO[0m - INSERT INTO messages (agent, platform, recipient, content, timestamp, message_type, message_id, sender_id, is_incoming, status, extra_data, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Signature: 8598
2025-09-08 11:39:13,824 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2061s ago] ('Agent1', 'WhatsApp', '+1987654321', "Hi! I can help you with order #12345. What's the issue?", '2025-09-08 11:39:13.824689', None, None, None, 0, 'sent', None, '2025-09-08 11:39:13.824691', '2025-09-08 11:39:13.824692') - Signature: 8598
2025-09-08 11:39:13,824 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,825 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,825 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id, messages.agent, messages.platform, messages.recipient, messages.content, messages.timestamp, messages.message_type, messages.message_id, messages.sender_id, messages.is_incoming, messages.status, messages.extra_data, messages.created_at, messages.updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,825 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2044s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,825 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.recipient = ? AND conversations.platform = ?
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,825 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2029s ago] ('+1987654321', 'WhatsApp', 1, 0) - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - UPDATE conversations SET last_message_at=?, message_count=?, updated_at=? WHERE conversations.id = ? - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.1648s ago] ('2025-09-08 11:39:13.824689', 2, '2025-09-08 11:39:13.825982', 1) - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.id = ? - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.2016s ago] (2,) - Signature: 8598
2025-09-08 11:39:13,826 - src.services.message_service.MessageService - [32mINFO[0m - Message logged successfully - ID: 2, Agent: Agent1, Platform: WhatsApp - Signature: 8598
2025-09-08 11:39:13,826 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,827 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,827 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT conversations.id AS conversations_id, conversations.recipient AS conversations_recipient, conversations.platform AS conversations_platform, conversations.agent AS conversations_agent, conversations.last_message_at AS conversations_last_message_at, conversations.message_count AS conversations_message_count, conversations.is_active AS conversations_is_active, conversations.created_at AS conversations_created_at, conversations.updated_at AS conversations_updated_at 
FROM conversations 
WHERE conversations.is_active = 1 ORDER BY conversations.last_message_at DESC
 LIMIT ? OFFSET ? - Signature: 8598
2025-09-08 11:39:13,827 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.03918s ago] (50, 0) - Signature: 8598
2025-09-08 11:39:13,827 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,827 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,828 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,828 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06837s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,828 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 1) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,828 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06739s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,828 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT messages.id AS messages_id, messages.agent AS messages_agent, messages.platform AS messages_platform, messages.recipient AS messages_recipient, messages.content AS messages_content, messages.timestamp AS messages_timestamp, messages.message_type AS messages_message_type, messages.message_id AS messages_message_id, messages.sender_id AS messages_sender_id, messages.is_incoming AS messages_is_incoming, messages.status AS messages_status, messages.extra_data AS messages_extra_data, messages.created_at AS messages_created_at, messages.updated_at AS messages_updated_at 
FROM messages 
WHERE messages.agent = ? AND messages.is_incoming = 0) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06374s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT messages.platform AS messages_platform, count(messages.id) AS count_1 
FROM messages 
WHERE messages.agent = ? GROUP BY messages.platform - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06333s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - SELECT count(*) AS count_1 
FROM (SELECT DISTINCT messages.recipient AS messages_recipient 
FROM messages 
WHERE messages.agent = ?) AS anon_1 - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - [cached since 0.06274s ago] ('Agent1',) - Signature: 8598
2025-09-08 11:39:13,829 - sqlalchemy.engine.Engine - [32mINFO[0m - ROLLBACK - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,830 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:13,831 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,832 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:13,832 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,833 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:13,834 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:13,835 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:13,836 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:13,837 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:13,838 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:13,839 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:13,839 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:13,840 - src.api.webhook_app - [32mINFO[0m - Received webhook data - Object: None - Signature: 8598
2025-09-08 11:39:13,840 - src.api.webhook_app - [33mWARNING[0m - Unknown webhook object type: None - Signature: 8598
2025-09-08 11:39:13,840 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: Unknown object type: None - Signature: 8598
2025-09-08 11:39:13,840 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:39:13,841 - src.api.webhook_app - [33mWARNING[0m - Bad request: 400 Bad Request: The browser (or proxy) sent a request that this server could not understand. - Signature: 8598
2025-09-08 11:39:24,332 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:39:24,332 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:39:24,332 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:39:24,334 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:39:24,334 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:39:24,334 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:39:24,334 - __main__ - [32mINFO[0m - 🚀 Starting HCTC-CRM Webhook Server - Signature: 8598 - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:24,335 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,337 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:24,337 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:24,338 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:24,338 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:24,338 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:24,338 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,338 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:24,338 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:24,339 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:24,340 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,341 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:24,342 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:24,343 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:24,344 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:24,345 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,346 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:24,346 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:24,346 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:24,346 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:24,346 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:24,346 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:24,346 - __main__ - [32mINFO[0m - ✅ Database initialized successfully - Signature: 8598
2025-09-08 11:39:31,108 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:39:31,108 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:39:31,108 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:39:31,117 - src.utils.logging - [32mINFO[0m - HCTC-CRM Logging System Initialized - Signature: 8598 - Signature: 8598
2025-09-08 11:39:31,117 - src.utils.logging - [32mINFO[0m - Log Level: INFO - Signature: 8598
2025-09-08 11:39:31,117 - src.utils.logging - [32mINFO[0m - Environment: development - Signature: 8598
2025-09-08 11:39:31,117 - __main__ - [32mINFO[0m - 🚀 Starting HCTC-CRM Dashboard - Signature: 8598 - Signature: 8598
2025-09-08 11:39:31,118 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:31,119 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,120 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE system_logs - Signature: 8598
2025-09-08 11:39:31,120 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,120 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE conversations - Signature: 8598
2025-09-08 11:39:31,120 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00010s] () - Signature: 8598
2025-09-08 11:39:31,121 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE agents - Signature: 8598
2025-09-08 11:39:31,121 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,121 - sqlalchemy.engine.Engine - [32mINFO[0m - 
DROP TABLE messages - Signature: 8598
2025-09-08 11:39:31,121 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00010s] () - Signature: 8598
2025-09-08 11:39:31,122 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:31,122 - src.database.connection - [32mINFO[0m - Database tables dropped successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:31,122 - sqlalchemy.engine.Engine - [32mINFO[0m - BEGIN (implicit) - Signature: 8598
2025-09-08 11:39:31,122 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("messages") - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("messages") - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("agents") - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("agents") - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("conversations") - Signature: 8598
2025-09-08 11:39:31,123 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("conversations") - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA main.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - PRAGMA temp.table_info("system_logs") - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - [raw sql] () - Signature: 8598
2025-09-08 11:39:31,124 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE messages (
	id INTEGER NOT NULL, 
	agent VARCHAR(100) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	content TEXT NOT NULL, 
	timestamp DATETIME NOT NULL, 
	message_type VARCHAR(50), 
	message_id VARCHAR(100), 
	sender_id VARCHAR(100), 
	is_incoming BOOLEAN NOT NULL, 
	status VARCHAR(50), 
	extra_data TEXT, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:31,125 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00012s] () - Signature: 8598
2025-09-08 11:39:31,125 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_platform_timestamp ON messages (platform, timestamp) - Signature: 8598
2025-09-08 11:39:31,125 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00010s] () - Signature: 8598
2025-09-08 11:39:31,125 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_messages_message_id ON messages (message_id) - Signature: 8598
2025-09-08 11:39:31,125 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_recipient ON messages (recipient) - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_sender_id ON messages (sender_id) - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_status ON messages (status) - Signature: 8598
2025-09-08 11:39:31,126 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_timestamp ON messages (agent, timestamp) - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_agent ON messages (agent) - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_message_type ON messages (message_type) - Signature: 8598
2025-09-08 11:39:31,127 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00013s] () - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_timestamp ON messages (recipient, timestamp) - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_platform ON messages (platform) - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_is_incoming ON messages (is_incoming) - Signature: 8598
2025-09-08 11:39:31,128 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_messages_timestamp ON messages (timestamp) - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_incoming_timestamp ON messages (is_incoming, timestamp) - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00006s] () - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE agents (
	id INTEGER NOT NULL, 
	name VARCHAR(100) NOT NULL, 
	email VARCHAR(255), 
	phone VARCHAR(20), 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)

 - Signature: 8598
2025-09-08 11:39:31,129 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE UNIQUE INDEX ix_agents_name ON agents (name) - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_agents_is_active ON agents (is_active) - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE conversations (
	id INTEGER NOT NULL, 
	recipient VARCHAR(50) NOT NULL, 
	platform VARCHAR(50) NOT NULL, 
	agent VARCHAR(100), 
	last_message_at DATETIME NOT NULL, 
	message_count INTEGER NOT NULL, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:31,130 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00009s] () - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_agent_active ON conversations (agent, is_active) - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_agent ON conversations (agent) - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_last_message ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:31,131 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_is_active ON conversations (is_active) - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_recipient ON conversations (recipient) - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_recipient_platform ON conversations (recipient, platform) - Signature: 8598
2025-09-08 11:39:31,132 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00008s] () - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_last_message_at ON conversations (last_message_at) - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_conversations_platform ON conversations (platform) - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - 
CREATE TABLE system_logs (
	id INTEGER NOT NULL, 
	level VARCHAR(20) NOT NULL, 
	message TEXT NOT NULL, 
	module VARCHAR(100), 
	function VARCHAR(100), 
	line_number INTEGER, 
	timestamp DATETIME NOT NULL, 
	extra_data TEXT, 
	PRIMARY KEY (id)
)

 - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00007s] () - Signature: 8598
2025-09-08 11:39:31,133 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_module ON system_logs (module) - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_level_timestamp ON system_logs (level, timestamp) - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_timestamp ON system_logs (timestamp) - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX ix_system_logs_level ON system_logs (level) - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00005s] () - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - CREATE INDEX idx_module_timestamp ON system_logs (module, timestamp) - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - [no key 0.00004s] () - Signature: 8598
2025-09-08 11:39:31,134 - sqlalchemy.engine.Engine - [32mINFO[0m - COMMIT - Signature: 8598
2025-09-08 11:39:31,135 - src.database.connection - [32mINFO[0m - Database tables created successfully - Signature: 8598 - Signature: 8598
2025-09-08 11:39:31,135 - __main__ - [32mINFO[0m - ✅ Database initialized successfully - Signature: 8598
2025-09-08 11:39:31,135 - dash.dash - [32mINFO[0m - Dash is running on http://0.0.0.0:8050/
 - Signature: 8598
